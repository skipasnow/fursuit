<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fursuit Creators</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body { 
    background: #2e2e2e; 
    color: #fff; 
    font-family: sans-serif; 
    padding: 20px; 
  }

  table { 
    width: 100%; 
    border-collapse: collapse; 
  }

  th, td { 
    padding: 8px; 
    border: 1px solid #555; 
    text-align: left; 
  }

  th { 
    cursor: pointer; 
  }

  .hover-preview {
    cursor: pointer;
    color: #00ffff;
  }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>

<h1>Fursuit Creators</h1>

<table id="creator-table">
  <thead></thead>
  <tbody></tbody>
</table>

<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQesC2Kuwk-4S3ID4cCsCvOGM4U0DstvIoewGKQn4pZII8mkoa6fxcN18ozOO3_EkISGIkKNVngLYdN/pub?gid=131139777&single=true&output=csv";

Papa.parse(csvUrl, {
  download: true,
  header: true,
  complete: function(results) {
    const table = document.getElementById("creator-table");
    const tableHead = table.querySelector("thead");
    const tableBody = table.querySelector("tbody");

    // Filter out empty rows (rows without a Maker)
    const data = results.data.filter(row => row.Maker);

    // Generate table header dynamically
    if (data.length > 0) {
      const headerRow = document.createElement("tr");
      Object.keys(data[0]).forEach(colName => {
        const th = document.createElement("th");
        th.textContent = colName;
        headerRow.appendChild(th);
      });
      tableHead.appendChild(headerRow);
    }

    // Generate table rows dynamically
    data.forEach(row => {
      const tr = document.createElement("tr");

      Object.keys(row).forEach(colName => {
        const td = document.createElement("td");

        // Handle Preview column with hover image
        if (colName === "Preview" && row[colName]) {
          const hoverSpan = document.createElement("span");
          hoverSpan.textContent = "Hover";
          hoverSpan.className = "hover-preview";

          const previewImg = document.createElement("img");
          previewImg.src = row[colName];
          previewImg.style.position = "absolute";
          previewImg.style.width = "200px";
          previewImg.style.height = "200px";
          previewImg.style.border = "2px solid #fff";
          previewImg.style.display = "none";
          previewImg.style.zIndex = 1000;
          document.body.appendChild(previewImg);

          hoverSpan.addEventListener("mouseenter", e => {
            previewImg.style.display = "block";
            previewImg.style.left = e.pageX + 20 + "px";
            previewImg.style.top = e.pageY + 20 + "px";
          });
          hoverSpan.addEventListener("mousemove", e => {
            previewImg.style.left = e.pageX + 20 + "px";
            previewImg.style.top = e.pageY + 20 + "px";
          });
          hoverSpan.addEventListener("mouseleave", () => {
            previewImg.style.display = "none";
          });

          td.appendChild(hoverSpan);

        } else if (colName === "Link" && row[colName]) {
          // Make Link clickable
          const a = document.createElement("a");
          a.href = row[colName];
          a.target = "_blank";
          a.textContent = row[colName];
          td.appendChild(a);

        } else {
          td.textContent = row[colName] || ""; // fallback to empty string
        }

        tr.appendChild(td);
      });

      tableBody.appendChild(tr);
    });
  }
});
</script>

</body>
</html>

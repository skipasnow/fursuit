<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kemono Fursuit Makers</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://unpkg.com/tabulator-tables@5.6.0/dist/css/tabulator_midnight.min.css" rel="stylesheet">

<style>
  /* --- CUSTOM CURSOR LOGIC --- */

  /* 1. DEFAULT POINTER (Open Paw) */
  html, body, a, button, select, input,
  .tabulator, .tabulator-row, .tabulator-cell, 
  .preview-box, .logo-box, .filter-input,
  .tabulator-header, .tabulator-col, .tabulator-col-content, .tabulator-sortable {
    cursor: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZmlsdGVyIGlkPSJzIj48ZmVEcm9wU2hhZG93IGR4PSIxIiBkeT0iMSIHN0ZERldmlhdGlvbj0iMSIgZmxvb2Qtb3BhY2l0eT0iMC40Ii8+PC9maWx0ZXI+PGcgZmlsdGVyPSJ1cmwoI3MpIj48cGF0aCBkPSJNMTAuNSwyOCBRNC41LDIyIDYuNSwxNCBROC41LDYgMTYuNSw0IFEyNC41LDYgMjYuNSwxNCBXMjguNSwyMiAyMi41LDI4IFoiIGZpbGw9IiNGRkE1MDAiIHN0cm9rZT0iIzVBMkQwQyIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48Y2lyY2xlIGN4PSIxMC41IiBjeT0iMTQiIHI9IjMiIGZpbGw9IiNGRkMwQ0IiLz48Y2lyY2xlIGN4PSIxNi41IiBjeT0iMTAiIHI9IjMuNSIgZmlsbD0iI0ZGQzBDQiIvPjxjaXJjbGUgY3g9IjIyLjUiIGN5PSIxNCIgcj0iMyIgZmlsbD0iI0ZGQzBDQiIvPjxlbGxpcHNlIGN4PSIxNi41IiBjeT0iMjIiIHJ4PSI2IiByeT0iNCIgZmlsbD0iI0ZGQzBDQiIvPjxwYXRoIGQ9Ik04LjUsMjAgUTEwLjUsMTggNi41LDE2IiBzdHJva2Utd2lkdGg9IjEuNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIi8+PHBhdGggZD0iTTI0LjUsMjAgUTIyLjUsMTggMjYuNSwxNiIgc3Ryb2tlLXdpZHRoPSIxLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIvPjxwYXRoIGQ9Ik0yLDIgTDYsNiBMNywzIFoiIGZpbGw9IiNGRkYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9nPjwvc3ZnPg==') 2 2, auto !important;
  }

  /* 2. CLICK/ACTIVE CURSOR (Closed Paw - click.png) */
  html:active, body:active, *:active, 
  .tabulator-col:active, .tabulator-sortable:active {
    cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAB7CAYAAAC8a4gRAAAGNGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgZXhpZjpDb2xvclNwYWNlPSIxIgogICBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTI4IgogICBleGlmOlBpeGVsWURpbWVuc2lvbj0iMTIzIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjEyMyIKICAgdGlmZjpJbWFnZVdpZHRoPSIxMjgiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiCiAgIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiCiAgIHRpZmY6WFJlc29sdXRpb249Ijk2LzEiCiAgIHRpZmY6WVJlc29sdXRpb249Ijk2LzEi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') 16 16, auto !important;
  }

  /* --- LAYOUT FIX: SAFE VIEWPORT --- */
  html {
    height: 100%;
    margin: 0;
    padding: 0;
    background: #2e2e2e;
    color: #fff;
    font-family: sans-serif;
  }

  body {
    height: 100%;
    margin: 0;
    padding: 20px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    overflow: auto; 
  }

  /* --- HEADER ANIMATION --- */
  h1 {
    margin: 0 0 15px 0;
    flex-shrink: 0;
  }

  #header-text {
    display: inline-block;
    position: relative;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform-origin: left center;
    cursor: inherit;
  }

  #header-text:hover {
    transform: scale(1.15);
    background-image: linear-gradient(
      to right, 
      #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3, 
      #ff0000, #ff7f00, #ffff00
    );
    background-size: 200% auto;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
    animation: rainbow-move 2s linear infinite;
  }

  @keyframes rainbow-move { to { background-position: 200% center; } }

  .star-particle {
    position: fixed; top: 0; color: gold; font-size: 1.2em;
    pointer-events: none; z-index: 99999; user-select: none;
    text-shadow: 0 0 5px rgba(255, 215, 0, 0.8);
    animation: fall 1.5s linear forwards;
  }

  @keyframes fall {
    0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
    100% { transform: translateY(300px) rotate(180deg) scale(0.5); opacity: 0; }
  }

  /* --- CONTROLS --- */
  .controls-container {
    background: #1f1f1f; padding: 15px; border-radius: 8px; margin-bottom: 15px;
    display: flex; gap: 15px; align-items: center; flex-wrap: wrap; border: 1px solid #444;
    flex-shrink: 0; 
  }
  .control-group { display: flex; align-items: center; gap: 10px; }
  select, button {
    padding: 8px 12px; border-radius: 4px; border: 1px solid #555;
    background: #333; color: #fff; cursor: pointer; font-size: 14px;
    cursor: inherit; 
  }
  select:hover, button:hover { background: #444; border-color: darkorange; }
  button.reset-btn { background: #c62828; border-color: #e53935; }
  button.reset-btn:hover { background: #d32f2f; }
  label { font-weight: bold; color: #ccc; }

  /* --- TABLE CONTAINER --- */
  #creator-table {
    width: 100%;
    max-width: 100%; 
    flex-grow: 1; 
    border: 1px solid #444;
  }

  /* --- PREVIEW & LOGO BOXES --- */
  .preview-container { display: flex; gap: 2px; flex-wrap: wrap; justify-content: center; }
  .preview-box, .logo-box {
    display: inline-block; width: 30px; height: 30px;
    background-size: cover; background-position: center;
    border-radius: 4px; cursor: pointer; border: 1px solid #555; box-sizing: border-box;
    cursor: inherit;
  }
  .preview-box:hover, .logo-box:hover { border-color: darkorange; box-shadow: 0 0 5px rgba(255,140,0,0.5); }

  /* --- FLOATING TOOLTIP --- */
  #image-tooltip {
    display: none; position: fixed; width: 400px; height: 400px;
    background-color: #222; background-size: contain; background-repeat: no-repeat;
    background-position: center; border: 2px solid #fff;
    box-shadow: 0 0 20px rgba(0,0,0,0.7); z-index: 99999; pointer-events: none;
    opacity: 0; transition: opacity 0.25s ease-out, transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  /* --- TABULATOR STYLES & OVERRIDES --- */
  .tabulator .tabulator-header { 
    background-color: #1f1f1f !important; 
    font-weight: bold !important;
    overflow: hidden !important;
    cursor: inherit; /* Use custom cursor */
  }
  .tabulator .tabulator-header .tabulator-col-content {
    white-space: normal !important; padding: 8px 4px;
    cursor: inherit;
  }
  .tabulator .tabulator-header .tabulator-header-filter {
    height: auto !important; overflow: visible !important; margin-top: 5px;
  }
  .tabulator .tabulator-row .tabulator-cell { border: 1px solid #444; }
  .tabulator .tabulator-row:nth-child(even) { background-color: #383838; }
  .tabulator .tabulator-row:nth-child(odd) { background-color: #2e2e2e; }

  /* Base Cell Transition */
  .tabulator-row .tabulator-cell {
    transition: transform 0.1s ease-out, filter 0.2s ease, box-shadow 0.2s ease, font-size 0.2s ease, font-weight 0.2s ease;
    position: relative; background-clip: padding-box; overflow: hidden; 
    cursor: inherit;
  }

  /* 1. ACTIVE TILT STATE */
  .tabulator-row .tabulator-cell.active-tilt {
    z-index: 10000 !important; 
    box-shadow: 0 15px 30px rgba(0,0,0,0.6);
    border-color: rgba(255,255,255,0.5) !important; 
    filter: brightness(1.2);
    overflow: visible !important; 
  }

  /* 2. URL/LINK ANIMATION */
  a { color: darkorange !important; text-decoration: none; transition: all 0.2s; cursor: inherit; }
  .tabulator-row .tabulator-cell.active-tilt a {
    display: inline-block; color: #ffd699 !important;
    transform: translateY(-4px) scale(1.2);
    text-shadow: 0 0 8px rgba(255, 140, 0, 0.8), 0 0 15px rgba(255, 140, 0, 0.6);
    transition: all 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative; z-index: 10001;
  }

  /* 3. TEXT WRAPPER STYLING */
  .text-wrapper {
    display: block; width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    transition: all 0.2s ease; transform-origin: center center;
    box-sizing: border-box;
  }
  .tabulator-row .tabulator-cell.active-tilt .text-wrapper {
    position: absolute; left: 0; top: 50%;
    min-width: 100%; width: max-content; 
    background-color: rgba(40, 40, 40, 0.95);
    padding: 12px 20px; min-height: 45px; display: flex; align-items: center;
    border-radius: 4px; box-shadow: 0 10px 25px rgba(0,0,0,0.7); 
    z-index: 100; pointer-events: auto;
    border: 1px solid #ffffff;
  }

  /* 4. LIGHT SWEEP ANIMATION */
  .text-content { color: #fff; font-weight: normal; transition: font-weight 0.2s ease; }
  .tabulator-row .tabulator-cell.active-tilt .text-content {
    font-weight: bold;
    background: linear-gradient(110deg, #ffffff 40%, #ff8c00 50%, #ffffff 60%);
    background-size: 200% 100%; background-position: 200% center;
    -webkit-background-clip: text; background-clip: text;
    -webkit-text-fill-color: transparent; color: transparent;
    animation: shine-sweep 1.5s linear infinite;
  }
  @keyframes shine-sweep { 0% { background-position: 200% center; } 100% { background-position: -200% center; } }

  /* --- SPECIALTY TAG STYLES --- */
  .tag-wrapper { display: flex; flex-wrap: wrap; gap: 4px; align-items: center; }
  .specialty-tag {
    background-color: #444; color: #fff; padding: 2px 6px;
    border-radius: 4px; font-size: 0.85em; cursor: pointer;
    border: 1px solid #555; transition: all 0.2s ease; font-weight: normal;
  }
  .specialty-tag:hover { background-color: darkorange; border-color: #fff; transform: scale(1.1); }

  /* --- HEADER FILTER STYLES --- */
  .filter-container {
    display: flex; flex-direction: column; gap: 6px; padding: 8px;
    background: #222; border-radius: 4px; width: 100%; box-sizing: border-box; 
    min-height: 100px; padding-bottom: 14px; 
  }
  .filter-input {
    background: #333; color: #fff; border: 1px solid #555;
    padding: 5px 8px; border-radius: 3px; font-size: 0.9em;
    width: 100%; outline: none; box-sizing: border-box; 
    cursor: inherit !important;
  }
  .filter-input:focus { border-color: darkorange; }
  .filter-tag {
    background-color: darkorange; color: #fff; padding: 2px 6px;
    border-radius: 4px; font-size: 0.8em; display: inline-flex; align-items: center; gap: 4px;
    animation: popIn 0.2s ease-out; margin-right: 3px; margin-bottom: 3px;
  }
  @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
  .filter-remove { cursor: pointer; font-weight: bold; color: #000; font-size: 10px; }
  .filter-remove:hover { color: #fff; }
  .filter-actions {
      margin-top: auto; width: 100%; display: flex; justify-content: space-between; align-items: center; 
      border-top: 1px solid #444; padding-top: 8px; padding-bottom: 4px; line-height: 1.5;
  }
  .filter-clear-all {
    font-size: 0.85em; color: #ff6b6b; cursor: pointer; text-decoration: underline; white-space: nowrap; line-height: 1.5;
  }
  .filter-clear-all:hover { color: #ff4040; }
  .filter-apply-btn {
    font-size: 0.85em; color: #4caf50; cursor: pointer; text-decoration: underline; white-space: nowrap; font-weight: bold; line-height: 1.5;
  }
  .filter-apply-btn:hover { color: #66bb6a; }
  .tags-area { display: flex; flex-wrap: wrap; gap: 3px; width: 100%; margin-bottom: 4px; }
</style>
</head>
<body>

<h1><span id="header-text">Kemono Fursuit Makers</span></h1>

<div class="controls-container">
  <div class="control-group">
    <label>Quick Sort:</label>
    <select id="sort-field">
      <option value="rank">Rank (Default)</option>
      <option value="price">Price</option>
      <option value="portfolio">Portfolio Size</option>
      <option value="followers">Followers</option>
      <option value="acctAge">Account Age</option>
      <option value="partials">Partials Count</option>
      <option value="fursuits">Fursuits Count</option>
    </select>
  </div>
  <div class="control-group">
    <label>Order:</label>
    <select id="sort-dir">
      <option value="asc">Low to High (Asc)</option>
      <option value="desc">High to Low (Desc)</option>
    </select>
  </div>
  <button id="reset-sort" class="reset-btn">Reset Sort</button>
  <div style="margin-left: auto; font-size: 0.9em; color: #aaa; width: 100%; margin-top:10px;">
    *Hold <b>Shift</b> and click column headers to sort by multiple columns at once.
  </div>
</div>

<div id="image-tooltip"></div>
<div id="creator-table"></div>

<script src="https://unpkg.com/tabulator-tables@5.6.0/dist/js/tabulator.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQesC2Kuwk-4S3ID4cCsCvOGM4U0DstvIoewGKQn4pZII8mkoa6fxcN18ozOO3_EkISGIkKNVngLYdN/pub?gid=131139777&single=true&output=csv";

// --- TOOLTIP LOGIC ---
const tooltipEl = document.getElementById("image-tooltip");
let currentPreviewImages = [];
let currentImageIndex = 0;
let slideshowInterval;
let hideTimeout; 
let isTooltipCentered = false; 

function displayImageInTooltip(imageUrl, forceAnimation = false) {
    if (!imageUrl) { tooltipEl.style.backgroundImage = 'none'; return; }
    const baseTransform = isTooltipCentered ? "translate(-50%, -50%)" : "";
    if (tooltipEl.style.opacity === '0' || forceAnimation) {
        const startAngle = Math.random() < 0.5 ? -5 : 5;
        tooltipEl.style.transition = 'none';
        tooltipEl.style.opacity = '0';
        tooltipEl.style.transform = `${baseTransform} rotate(${startAngle}deg) scale(0.95)`;
    }
    const img = new Image();
    img.onload = () => {
        if (tooltipEl.style.display !== 'none') {
            tooltipEl.style.backgroundImage = `url('${imageUrl}')`;
            void tooltipEl.offsetWidth; 
            tooltipEl.style.transition = 'opacity 0.25s ease-out, transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
            tooltipEl.style.opacity = '1';
            tooltipEl.style.transform = `${baseTransform} rotate(0deg) scale(1)`;
        }
    };
    img.src = imageUrl;
}

function showTooltip(imageUrls, startIndex = 0, forceAnimation = false) {
    if (!imageUrls || imageUrls.length === 0) { hideTooltip(); return; }
    currentPreviewImages = imageUrls;
    currentImageIndex = startIndex;
    tooltipEl.style.display = "flex"; 
    displayImageInTooltip(currentPreviewImages[currentImageIndex], forceAnimation);
}

function hideTooltip() {
    clearTimeout(hideTimeout);
    clearInterval(slideshowInterval);
    hideTimeout = setTimeout(() => {
        tooltipEl.style.opacity = '0';
        setTimeout(() => {
             if(tooltipEl.style.opacity === '0') {
                 tooltipEl.style.display = "none";
                 tooltipEl.style.backgroundImage = 'none';
                 tooltipEl.textContent = ''; 
                 currentPreviewImages = [];
                 currentImageIndex = 0;
             }
        }, 200);
    }, 50);
}

function startSlideshow() {
    clearInterval(slideshowInterval);
    if (currentPreviewImages.length > 1) {
        slideshowInterval = setInterval(() => {
            currentImageIndex = (currentImageIndex + 1) % currentPreviewImages.length;
            displayImageInTooltip(currentPreviewImages[currentImageIndex], true);
        }, 2000);
    }
}

// --- POSITIONING LOGIC ---
function centerTooltip() {
    isTooltipCentered = true;
    tooltipEl.style.top = "50%";
    tooltipEl.style.left = "50%";
    tooltipEl.style.width = "80vh"; tooltipEl.style.height = "80vh";
}
function moveTooltip(e) {
    isTooltipCentered = false;
    const tooltipSize = 200; const offset = 15; 
    const windowHeight = window.innerHeight;
    tooltipEl.style.width = tooltipSize + "px"; tooltipEl.style.height = tooltipSize + "px";
    let left = e.clientX + offset; let top = e.clientY + offset;
    if (top + tooltipSize > windowHeight) { top = e.clientY - tooltipSize - offset; }
    tooltipEl.style.left = left + "px"; tooltipEl.style.top = top + "px";
}

// --- SPECIALTY FILTER LOGIC ---
let pendingSpecialtyFilters = new Set();
let appliedSpecialtyFilters = new Set();

window.addSpecialtyFilter = function(tag) {
    if(!tag) return;
    pendingSpecialtyFilters.add(tag.trim());
    updateFilterHeader();
    triggerHeaderResize(); 
}

window.removeSpecialtyFilter = function(tag) {
    pendingSpecialtyFilters.delete(tag);
    updateFilterHeader();
    triggerHeaderResize(); 
}

window.clearSpecialtyFilters = function() {
    pendingSpecialtyFilters.clear();
    appliedSpecialtyFilters.clear(); 
    updateFilterHeader();
    triggerHeaderResize();
    table.setHeaderFilterValue("specialty", []); 
}

window.applySpecialtyFilters = function() {
    appliedSpecialtyFilters = new Set(pendingSpecialtyFilters);
    table.setHeaderFilterValue("specialty", Array.from(appliedSpecialtyFilters));
    triggerHeaderResize();
}

// Helper to force Tabulator to redraw headers (Fixes sizing issue)
function triggerHeaderResize() {
    if(table) {
        setTimeout(() => {
             table.columnManager.renderer.renderColumns();
             table.redraw(true);
        }, 50);
    }
}

function updateFilterHeader() {
    const container = document.getElementById('specialty-filter-container');
    if(!container) return;
    
    let tagsArea = container.querySelector('.tags-area');
    if (!tagsArea) {
        container.innerHTML = '';
        const input = document.createElement("input");
        input.type = "text";
        input.className = "filter-input";
        input.placeholder = "+ Type tag...";
        input.addEventListener("keydown", function(e){
            if(e.key === "Enter"){
                addSpecialtyFilter(this.value);
                this.value = "";
            }
        });
        container.appendChild(input);
        
        tagsArea = document.createElement("div");
        tagsArea.className = "tags-area";
        container.appendChild(tagsArea);
        
        const actionsDiv = document.createElement('div');
        actionsDiv.className = 'filter-actions';
        
        const applyBtn = document.createElement('span');
        applyBtn.className = 'filter-apply-btn';
        applyBtn.innerText = 'Apply Filter';
        applyBtn.onclick = window.applySpecialtyFilters;
        actionsDiv.appendChild(applyBtn);

        const clearBtn = document.createElement('span');
        clearBtn.className = 'filter-clear-all';
        clearBtn.innerText = 'Clear All';
        clearBtn.onclick = window.clearSpecialtyFilters;
        actionsDiv.appendChild(clearBtn);
        
        container.appendChild(actionsDiv);
    } 

    tagsArea.innerHTML = '';
    if (pendingSpecialtyFilters.size > 0) {
        pendingSpecialtyFilters.forEach(tag => {
            const pill = document.createElement('span');
            pill.className = 'filter-tag';
            pill.innerHTML = `${tag} <span class="filter-remove" onclick="removeSpecialtyFilter('${tag}')">✕</span>`;
            tagsArea.appendChild(pill);
        });
    } else {
        tagsArea.innerHTML = '<span style="color:#666; font-size:0.8em;">No tags selected</span>';
    }
}

// --- HELPERS ---
function parseImageFormula(formula) {
  if(!formula) return "";
  const match = formula.match(/=IMAGE\("(.+)"\)/);
  return match ? match[1] : formula;
}
function parsePreviewImages(urlsString) {
    if (!urlsString || typeof urlsString !== 'string') return [];
    return urlsString.split(' ').map(url => url.trim()).filter(url => url !== '');
}
function cleanNumber(val) {
    if (val === null || val === undefined || val === "") return null;
    if (typeof val === 'string') {
        const cleaned = val.replace(/[$,\s]/g, '');
        if(cleaned === "") return null;
        const num = parseFloat(cleaned);
        return isNaN(num) ? null : num;
    }
    return val; 
}
function getGradientColor(value, min, max, lowIsGreen=false){
    if(value === null || value === undefined || value === "" || isNaN(value)) return "";
    const ratio = (value - min)/(max - min);
    const cappedRatio = Math.min(Math.max(ratio,0),1);
    let r,g;
    if(lowIsGreen){
        r = Math.floor(179 * cappedRatio + 46 * (1-cappedRatio)); 
        g = Math.floor(27 * cappedRatio + 111 * (1-cappedRatio)); 
    } else {
        r = Math.floor(46 * cappedRatio + 179 * (1-cappedRatio));
        g = Math.floor(111 * cappedRatio + 27 * (1-cappedRatio));
    }
    return `rgb(${r},${g},0)`;
}
function formatTextCell(cell) {
    const val = cell.getValue();
    if(val === null || val === undefined) return "";
    return `<div class="text-wrapper"><span class="text-content">${val}</span></div>`;
}

// --- HEADER ANIMATION ---
const headerText = document.getElementById('header-text');
let starInterval;
function createStar() {
    const star = document.createElement('div');
    star.className = 'star-particle';
    star.textContent = '★';
    const startX = Math.random() * window.innerWidth;
    const headerRect = headerText.getBoundingClientRect();
    const startY = headerRect.bottom - 10; 
    star.style.left = startX + 'px'; star.style.top = startY + 'px';
    const size = 0.8 + Math.random() * 0.8;
    star.style.fontSize = size + 'em';
    document.body.appendChild(star);
    setTimeout(() => { star.remove(); }, 1500);
}
headerText.addEventListener('mouseenter', () => { starInterval = setInterval(createStar, 50); });
headerText.addEventListener('mouseleave', () => { clearInterval(starInterval); });

// --- MAIN SCRIPT ---
let table;

Papa.parse(csvUrl, {
    download: true, header: true, dynamicTyping: true,
    complete: function(results) {
        const data = results.data.map(row => ({
            rank: cleanNumber(row['Rank']),
            maker: row['Maker'],
            logo: parseImageFormula(row['Logo']),
            makerType: row['Maker Type'],
            link: row['Link'],
            previewImages: parsePreviewImages(row['Preview']), 
            price: cleanNumber(row['$ Price']),
            shipOrFly: cleanNumber(row['$ Ship or Fly']),
            tariff: cleanNumber(row['$ Tariff (2025)']),
            ship: cleanNumber(row['$ Ship']),
            airTravel: cleanNumber(row['$ Air Travel']),
            travelSurplus: cleanNumber(row['$ Travel Surplus']),
            aesthetic: row['Aesthetic'],
            status: row['Status'],
            specialty: row['Specialty'],
            partials: cleanNumber(row['Partials']),
            fursuits: cleanNumber(row['Fursuits']),
            portfolio: cleanNumber(row['Portfolio Size']),
            country: row['Country'],
            followers: cleanNumber(row['Followers']), 
            acctAge: cleanNumber(row['Acct Age']),
            acctDate: row['Acct Date'],
            rep: row['Rep'],
            timeline: row['Timeline'],
            rankScore: cleanNumber(row['Rank Score']),
            imperfections: cleanNumber(row['Imperfections']),
            worksPerYear: cleanNumber(row['Works Per Year']),
            worksRank: cleanNumber(row['Works Rank']),
            followersRank: cleanNumber(row['Followers Rank']),
            acctDateRank: cleanNumber(row['Acct Date Rank']),
            partialsRank: cleanNumber(row['Partials Rank']),
            fursuitsRank: cleanNumber(row['Fursuits Rank']),
            priceRank: cleanNumber(row['Price Rank']),
        })).filter(row => row.maker); 

        if (data.length === 0) { console.warn("Data array is empty."); return; }

        const colMinMax = {};
        const gradientColumns = ['price','partials','fursuits','portfolio','acctAge','followers'];
        gradientColumns.forEach(col=>{
            const vals = data.map(d=>d[col]).filter(v=>v!==null && v!=="" && !isNaN(v));
            colMinMax[col] = {min: Math.min(...vals), max: Math.max(...vals)};
        });

        table = new Tabulator("#creator-table", {
            data: data,
            layout: "fitData",
            movableColumns: true,
            resizableColumns: true,
            placeholder:"No Data Available",
            height:"100%", 
            initialSort:[ {column:"rank", dir:"asc"} ],
            
            columns: [
                { title:"Rank", field:"rank", width:80, hozAlign:"center", sorter:"number", formatter: formatTextCell, cssClass: "text-cell" },
                { title:"Maker", field:"maker", formatter: formatTextCell, cssClass: "text-cell" },
                {
                    title:"Logo", field:"logo", hozAlign:"center", width:90, 
                    formatter:function(cell){
                        const val = cell.getValue();
                        return val ? `<div class="logo-box" style="background-image:url('${val}');"></div>` : "";
                    }
                },
                { title:"Maker Type", field:"makerType", formatter: formatTextCell, cssClass: "text-cell" },
                {
                    title:"Link", field:"link", formatter:"link", hozAlign:"center",
                    formatterParams:{ labelField:"link", urlField:"link", target:"_blank" }
                },
                {
                    title: "Preview", field: "previewImages", hozAlign: "center", width: 200,
                    formatter: function(cell) {
                        const imageUrls = cell.getValue();
                        if (!imageUrls || imageUrls.length === 0) return "";
                        const container = document.createElement('div');
                        container.className = 'preview-container';
                        imageUrls.forEach((url, index) => {
                            const previewBox = document.createElement('div');
                            previewBox.className = 'preview-box';
                            previewBox.style.backgroundImage = `url('${url}')`;
                            previewBox.setAttribute('data-image-index', index);
                            container.appendChild(previewBox);
                        });
                        return container;
                    },
                },
                {
                    title:"$ Price", field:"price", hozAlign:"right", sorter:"number",
                    sorterParams:{ alignEmptyValues:"bottom" },
                    formatter:function(cell){
                        const val = cell.getValue();
                        if(val === null) return "N/A"; 
                        const c = getGradientColor(val,colMinMax['price'].min,colMinMax['price'].max,true);
                        cell.getElement().style.backgroundColor = c;
                        cell.getElement().style.color="#fff";
                        return val;
                    }
                },
                { title:"$ Ship or Fly", field:"shipOrFly", hozAlign:"right", sorter:"number", sorterParams:{ alignEmptyValues:"bottom" }, formatter: formatTextCell, cssClass: "text-cell" },
                { title:"$ Tariff (2025)", field:"tariff", hozAlign:"right", sorter:"number", sorterParams:{ alignEmptyValues:"bottom" }, formatter: formatTextCell, cssClass: "text-cell" },
                { title:"$ Ship", field:"ship", hozAlign:"right", sorter:"number", sorterParams:{ alignEmptyValues:"bottom" }, formatter: formatTextCell, cssClass: "text-cell" },
                { title:"$ Air Travel", field:"airTravel", hozAlign:"right", sorter:"number", sorterParams:{ alignEmptyValues:"bottom" }, formatter: formatTextCell, cssClass: "text-cell" },
                { title:"$ Travel Surplus", field:"travelSurplus", hozAlign:"right", sorter:"number", sorterParams:{ alignEmptyValues:"bottom" }, formatter: formatTextCell, cssClass: "text-cell" },
                
                { title:"Aesthetic", field:"aesthetic", formatter: formatTextCell, cssClass: "text-cell" },
                { title:"Status", field:"status", formatter: formatTextCell, cssClass: "text-cell" },
                
                // --- SPECIALTY FILTER ---
                {
                    title:"Specialty", 
                    field:"specialty", 
                    width: 300,
                    headerFilter: function(cell, onRendered, success, cancel, editorParams){
                        const container = document.createElement("div");
                        container.id = "specialty-filter-container";
                        container.className = "filter-container";
                        setTimeout(updateFilterHeader, 100); 
                        return container;
                    },
                    headerFilterFunc: function(headerValue, rowValue, rowData, filterParams){
                        if (!headerValue || headerValue.length === 0) return true;
                        if (!rowValue) return false;
                        const rowTags = rowValue.split(',').map(t => t.trim());
                        let match = false;
                        headerValue.forEach(filterTag => {
                            if (rowTags.includes(filterTag)) match = true;
                        });
                        return match;
                    },
                    formatter: function(cell) {
                        const val = cell.getValue();
                        if (!val) return "";
                        const tags = val.split(',').map(t => t.trim()).filter(t => t);
                        const wrapper = document.createElement('div');
                        wrapper.className = 'tag-wrapper';
                        
                        tags.forEach(tag => {
                            const span = document.createElement('span');
                            span.className = 'specialty-tag';
                            span.textContent = tag;
                            span.onclick = function(e) {
                                e.stopPropagation(); 
                                window.addSpecialtyFilter(tag);
                            };
                            wrapper.appendChild(span);
                        });
                        return wrapper;
                    }
                },

                {
                    title:"Partials", field:"partials", hozAlign:"right", sorter:"number",
                    sorterParams:{ alignEmptyValues:"bottom" },
                    formatter:function(cell){
                        const val = cell.getValue();
                        if(val === null) return "";
                        const c = getGradientColor(val,colMinMax['partials'].min,colMinMax['partials'].max,false);
                        cell.getElement().style.backgroundColor = c;
                        cell.getElement().style.color="#fff";
                        return val;
                    }
                },
                {
                    title:"Fursuits", field:"fursuits", hozAlign:"right", sorter:"number",
                    sorterParams:{ alignEmptyValues:"bottom" },
                    formatter:function(cell){
                        const val = cell.getValue();
                        if(val === null) return "";
                        const c = getGradientColor(val,colMinMax['fursuits'].min,colMinMax['fursuits'].max,false);
                        cell.getElement().style.backgroundColor = c;
                        cell.getElement().style.color="#fff";
                        return val;
                    }
                },
                {
                    title:"Portfolio Size", field:"portfolio", hozAlign:"right", sorter:"number",
                    sorterParams:{ alignEmptyValues:"bottom" },
                    formatter:function(cell){
                        const val = cell.getValue();
                        if(val === null) return "";
                        const c = getGradientColor(val,colMinMax['portfolio'].min,colMinMax['portfolio'].max,false);
                        cell.getElement().style.backgroundColor = c;
                        cell.getElement().style.color="#fff";
                        return val;
                    }
                },
                { title:"Country", field:"country", formatter: formatTextCell, cssClass: "text-cell" },
                {
                    title:"Followers", field:"followers", hozAlign:"right", sorter:"number",
                    sorterParams:{ alignEmptyValues:"bottom" },
                    formatter:function(cell){
                        const val = cell.getValue();
                        if(val === null) return "";
                        const displayVal = val.toLocaleString(); 
                        const c = getGradientColor(val,colMinMax['followers'].min,colMinMax['followers'].max,false);
                        cell.getElement().style.backgroundColor = c;
                        cell.getElement().style.color="#fff";
                        return displayVal;
                    }
                },
                {
                    title:"Acct Age", field:"acctAge", hozAlign:"right", sorter:"number",
                    sorterParams:{ alignEmptyValues:"bottom" }, 
                    formatter:function(cell){
                        const val = cell.getValue();
                        if(val === null) return "";
                        const c = getGradientColor(val,colMinMax['acctAge'].min,colMinMax['acctAge'].max,false);
                        cell.getElement().style.backgroundColor = c;
                        cell.getElement().style.color="#fff";
                        return val;
                    }
                },
                { title:"Acct Date", field:"acctDate", formatter: formatTextCell, cssClass: "text-cell" }
            ],
            rowFormatter:function(row){
                const el = row.getElement();
                if(row.getIndex()%2===0) el.style.backgroundColor="#383838";
                else el.style.backgroundColor="#2e2e2e";
            },
            reactiveData:true, virtualDom:true
        });

        // --- EVENT LISTENERS ---
        document.getElementById("reset-sort").addEventListener("click", function(){
            table.clearSort(); table.setSort("rank", "asc"); table.clearHeaderFilter(); 
            document.getElementById("sort-field").value = "rank";
            document.getElementById("sort-dir").value = "asc";
            window.clearSpecialtyFilters(); 
        });
        document.getElementById("sort-field").addEventListener("change", function(){
             const field = this.value; const dir = document.getElementById("sort-dir").value; table.setSort(field, dir);
        });
        document.getElementById("sort-dir").addEventListener("change", function(){
             const field = document.getElementById("sort-field").value; const dir = this.value; table.setSort(field, dir);
        });
    }
});

// --- GLOBAL HOVER TRACKING ---
let lastTiltCell = null; 
document.addEventListener('mousemove', (e) => {
    const target = e.target;
    const isOverPreview = target.closest('.preview-box');
    const isOverLogo = target.closest('.logo-box'); 
    const isOverTooltip = target.closest('#image-tooltip');
    
    // PART 1: REACTIVE TILT
    const cell = target.closest('.tabulator-cell');
    if (lastTiltCell && lastTiltCell !== cell) {
        const oldWrapper = lastTiltCell.querySelector('.text-wrapper');
        if (oldWrapper) oldWrapper.style.transform = '';
        lastTiltCell.style.transform = 'none';
        lastTiltCell.classList.remove('active-tilt');
        lastTiltCell = null;
    }
    if (cell) {
        lastTiltCell = cell;
        cell.classList.add('active-tilt');
        const rect = cell.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const mouseX = e.clientX - centerX;
        const mouseY = e.clientY - centerY;
        const rotateX = -1 * (mouseY / (rect.height / 2)) * 10; 
        const rotateY = (mouseX / (rect.width / 2)) * 10;
        const wrapper = cell.querySelector('.text-wrapper');
        const transformString = `perspective(500px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.15)`;
        
        if (wrapper) { wrapper.style.transform = `translateY(-50%) ${transformString}`; } 
        else if (!cell.querySelector('a') && !cell.querySelector('.tag-wrapper')) { 
             cell.style.transform = `perspective(500px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
        }
    }

    // PART 2: TOOLTIP
    const sourceBox = isOverPreview || isOverLogo;
    if (sourceBox) {
        clearTimeout(hideTimeout);
        const rowEl = target.closest('.tabulator-row');
        if (rowEl && table) {
            const row = table.getRow(rowEl);
            if (row) {
                const rowData = row.getData();
                let imageUrls = []; let index = 0; let isLogo = false;
                if (isOverPreview) {
                    imageUrls = rowData.previewImages;
                    index = parseInt(sourceBox.getAttribute('data-image-index'), 10);
                    isLogo = false;
                } else if (isOverLogo) {
                    imageUrls = [rowData.logo]; index = 0; isLogo = true;
                }
                if (imageUrls && imageUrls.length > 0) {
                    const isNewContent = (currentPreviewImages[0] !== imageUrls[0] || currentPreviewImages.length !== imageUrls.length);
                    if (tooltipEl.style.display === 'none' || isNewContent || currentImageIndex !== index || isLogo) {
                        const shouldAnimate = (isNewContent || currentImageIndex !== index);
                        if (isLogo) {
                            clearInterval(slideshowInterval); moveTooltip(e); 
                            if (tooltipEl.style.display === 'none' || isNewContent) { showTooltip(imageUrls, index, true); }
                        } else {
                            clearInterval(slideshowInterval); centerTooltip(); 
                            if (isNewContent || currentImageIndex !== index) { showTooltip(imageUrls, index, shouldAnimate); } 
                            else { tooltipEl.style.display = "flex"; }
                        }
                    }
                }
            }
        }
    } else if (!isOverTooltip && tooltipEl.style.display !== 'none') { hideTooltip(); }
});
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kemono Fursuit Makers</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Tabulator CSS -->
<link href="https://unpkg.com/tabulator-tables@5.5.0/dist/css/tabulator.min.css" rel="stylesheet">
<style>
  body {
    background: #2e2e2e;
    color: #fff;
    font-family: sans-serif;
    padding: 20px;
  }

  #creator-table {
    margin-top: 20px;
  }

  /* Optional: hover image preview tooltip */
  .preview-hover {
    cursor: pointer;
    color: #00ffff;
    position: relative;
  }

  .preview-hover img {
    display: none;
    position: absolute;
    width: 250px;
    height: 250px;
    border: 2px solid #fff;
    z-index: 1000;
    top: 0;
    left: 105%;
  }
</style>
</head>
<body>

<h1>Kemono Fursuit Makers</h1>
<div id="creator-table"></div>

<!-- Dependencies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script src="https://unpkg.com/tabulator-tables@5.5.0/dist/js/tabulator.min.js"></script>

<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQesC2Kuwk-4S3ID4cCsCvOGM4U0DstvIoewGKQn4pZII8mkoa6fxcN18ozOO3_EkISGIkKNVngLYdN/pub?gid=131139777&single=true&output=csv";

// Load CSV data
Papa.parse(csvUrl, {
  download: true,
  header: true,
  complete: function(results) {
    const data = results.data.filter(row => row.Maker);

    if (!data.length) return;

    const columns = Object.keys(data[0]).map(colName => {
      if (colName === "Preview") {
        return {
          title: colName,
          field: colName,
          formatter: function(cell) {
            const value = cell.getValue();
            if (!value) return "";
            return `<span class="preview-hover">Hover<img src="${value}" alt="Preview"></span>`;
          },
          headerFilter: "input",
          hozAlign: "center",
          width: 100,
          resizable: true
        };
      } else if (colName === "Link") {
        return {
          title: colName,
          field: colName,
          formatter: "link",
          formatterParams: { labelField: colName, urlField: colName, target: "_blank" },
          headerFilter: "input",
          resizable: true
        };
      } else {
        return {
          title: colName,
          field: colName,
          headerFilter: "input",
          resizable: true
        };
      }
    });

    // Initialize Tabulator
    const table = new Tabulator("#creator-table", {
      data: data,
      layout: "fitDataTable", // columns fit content
      columns: columns,
      movableColumns: true,   // drag columns to reorder
      height: "700px",
      tooltips: true,
      responsiveLayout: "collapse",
      resizableRows: true,
      placeholder: "No data available",
      reactiveData: true,     // updates automatically if we modify data later
    });

    // Add hover preview functionality
    document.querySelector("#creator-table").addEventListener("mouseover", function(e) {
      if (e.target.closest(".preview-hover")) {
        const img = e.target.closest(".preview-hover").querySelector("img");
        if (img) img.style.display = "block";
      }
    });
    document.querySelector("#creator-table").addEventListener("mouseout", function(e) {
      if (e.target.closest(".preview-hover")) {
        const img = e.target.closest(".preview-hover").querySelector("img");
        if (img) img.style.display = "none";
      }
    });
  }
});
</script>

</body>
</html>
